{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios, { Axios } from 'axios';\n\n\nconst axiosInstance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '51662692-15f66b8f148fe09f1ff22625f',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n   \n    per_page: 15\n  }\n});\n\n\n\nexport async function getImagesByQuery(query, page){\n  try{\n const response = await axiosInstance.get('', {\n        params: {q: query, page}\n    })\n    return{\n      hits: response.data.hits,\n      totalHits: response.data.totalHits\n    } \n\n} catch(error) {\n  console.error(\"помилка!\", error);\n}\n  }\n \n\n\n","import SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightboxInstance;\n\n\n// СТВОРЕННЯ РОЗМІТКИ\nexport function createGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n  \n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, downloads, comments}) => `\n    <a href=\"${largeImageURL}\" class=\"gallery_item elem-js\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n\n<ul class=\"stats-container\">\n  <li class=\"stat-item\">\n    <span>Likes</span>\n    <span>${likes}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Views</span>\n    <span>${views}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Comments</span>\n    <span>${comments}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Downloads</span>\n    <span>${downloads}</span>\n  </li>\n</ul>\n    </a>\n  `).join('');\n\n  galleryContainer.innerHTML = markup;\n\n  if (!lightboxInstance) {\n    lightboxInstance = new SimpleLightbox('.gallery a');\n  } else {\n    lightboxInstance.refresh();\n  }}\n\n  // ОЧИСТИТИ ГАЛЕРЕЮ\n  export function clearGallery() {\n  const galleryContainer = document.querySelector('.gallery');\n  galleryContainer.innerHTML = '';\n}\n\n// ПОКАЗАТИ ЛОАДЕР\nexport function showLoader(){\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.remove('is-not-active');\n  } else {\n    console.warn('Loader element not found');\n  }\n}\n// ЗХОВАТИ ЛОАДЕР\nexport function hideLoader(){\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.add('is-not-active');\n  } else {\n    console.warn('Loader element not found in hideLoader');\n  }\n}\n\n// ПОКАЗАТИ КНОПКУ \"MORE PAGE\"\nexport function showLoadMoreButton(){\n  const button = document.querySelector('.button-js')\n  button.classList.remove('is-not-active')\n}\n\n// СХОВАТИ КНОПКУ \"MORE PAGE\"\nexport function hideLoadMoreButton(){\n  const button = document.querySelector('.button-js')\n  button.classList.add('is-not-active')\n}\n\n// ДОДАТИ ГАЛЕРЕЮ\n\nexport function createMoreGallery(images){\n\n\n    const galleryContainer = document.querySelector('.gallery');\n  \n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, downloads, comments}) => `\n    <a href=\"${largeImageURL}\" class=\"gallery_item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n\n<ul class=\"stats-container\">\n  <li class=\"stat-item\">\n    <span>Likes</span>\n    <span>${likes}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Views</span>\n    <span>${views}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Comments</span>\n    <span>${comments}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Downloads</span>\n    <span>${downloads}</span>\n  </li>\n</ul>\n    </a>\n  `).join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup)\n  \n\n  if (!lightboxInstance) {\n    lightboxInstance = new SimpleLightbox('.gallery a');\n  } else {\n    lightboxInstance.refresh();\n  }}\n\n\nexport function smoothScroll() {\n  const elements = document.querySelectorAll('.elem-js');\n  const lastElement = elements[elements.length - 1];\n  if (!lastElement) return;\n\n  // Висота останнього елемента\n  const height = lastElement.getBoundingClientRect().height;\n\n  // Прокрутка вниз на цю висоту\n  window.scrollBy({\n    top: height,\n    behavior: 'smooth'\n  });\n}\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { \n  createGallery, \n  createMoreGallery,\n  clearGallery,\n  showLoadMoreButton, \n  hideLoadMoreButton, \n  showLoader, \n  hideLoader, \n  smoothScroll \n} from \"./js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst searchText = document.querySelector('[name=\"search-text\"]');\nconst buttonLoadMore = document.querySelector('.button-js');\n\nconst per_page = 15;\nlet searchTextValue = '';\nlet page = 1;\nlet totalHitsValue = 0;\nlet loadedImages = 0;\n\n// --- ПОШУК ---\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  searchTextValue = searchText.value.trim();\n\n  if (searchTextValue === '') {\n    iziToast.error({ message: 'Enter text, please!' });\n    return;\n  }\n\n  clearGallery();\n  page = 1;\n  loadedImages = 0;\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const { hits, totalHits } = await getImagesByQuery(searchTextValue, page);\n    totalHitsValue = totalHits;\n\n    if (hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, no images found. Please try again!'\n      });\n      return;\n    }\n\n    createGallery(hits);\n    loadedImages += hits.length;\n\n    if (loadedImages < totalHitsValue) {\n      showLoadMoreButton();\n    } else {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of results.\"\n      });\n    }\n\n  } catch (err) {\n    iziToast.error({ message: 'Please try again later' });\n    console.error(err);\n  } finally {\n    hideLoader();\n  }\n});\n\n// --- LOAD MORE ---\nbuttonLoadMore.addEventListener('click', async () => {\n  page++;\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const { hits } = await getImagesByQuery(searchTextValue, page);\n\n    createMoreGallery(hits);\n    smoothScroll();\n    loadedImages += hits.length;\n\n    if (loadedImages < totalHitsValue) {\n      showLoadMoreButton();\n    } else {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of results.\"\n      });\n    }\n\n  } catch (err) {\n    iziToast.error({ message: 'Please try again later' });\n    console.error(err);\n  } finally {\n    hideLoader();\n  }\n});"],"names":["axiosInstance","axios","getImagesByQuery","query","page","response","error","lightboxInstance","createGallery","images","galleryContainer","markup","webformatURL","largeImageURL","tags","likes","views","downloads","comments","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","createMoreGallery","smoothScroll","elements","lastElement","height","form","searchText","buttonLoadMore","searchTextValue","totalHitsValue","loadedImages","iziToast","hits","totalHits","err"],"mappings":"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"}